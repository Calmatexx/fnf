<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Mini FNF Futurista</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #1bffff 0, #2e026d 45%, #050816 100%);
      color: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hidden {
      display: none !important;
    }

    #container {
      width: 100%;
      max-width: 1100px;
      padding: 16px;
    }

    /* MEN√ö FUTURISTA */
    #menu {
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(40, 0, 80, 0.9));
      border-radius: 24px;
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.35);
      padding: 24px;
      border: 1px solid rgba(0, 255, 255, 0.25);
      backdrop-filter: blur(12px);
      display: grid;
      gap: 20px;
    }

    #menu h1 {
      text-align: center;
      font-size: 1.9rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      text-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
      margin-bottom: 6px;
    }

    #menu h2 {
      text-align: center;
      font-size: 0.9rem;
      font-weight: 400;
      color: #d0d0ff;
    }

    .menu-section {
      border-radius: 18px;
      border: 1px solid rgba(0, 255, 255, 0.2);
      padding: 14px 16px;
      background: radial-gradient(circle at top left, rgba(0, 255, 255, 0.12), rgba(10, 5, 40, 0.9));
    }

    .menu-section h3 {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #aaf6ff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .menu-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }

    .toggle-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      border-radius: 999px;
      padding: 8px 14px;
      border: 1px solid rgba(0, 255, 255, 0.4);
      background: rgba(10, 10, 40, 0.8);
      cursor: pointer;
      font-size: 0.86rem;
      transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
      user-select: none;
    }

    .chip.active {
      background: linear-gradient(135deg, #00e0ff, #a855f7);
      color: #050816;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.7);
      transform: translateY(-1px);
    }

    select {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid rgba(0, 255, 255, 0.5);
      background: rgba(5, 5, 30, 0.9);
      color: #e5e7eb;
      font-size: 0.9rem;
      flex-grow: 1;
      outline: none;
    }

    label {
      font-size: 0.86rem;
      color: #c7d2fe;
    }

    #playButton {
      margin-top: 4px;
      width: 100%;
      padding: 12px;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #00ffd1, #4f46e5);
      color: #050816;
      font-weight: 700;
      font-size: 1rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      box-shadow: 0 0 18px rgba(0, 255, 209, 0.8);
      transition: transform 0.1s, box-shadow 0.1s;
    }

    #playButton:active {
      transform: scale(0.97);
      box-shadow: 0 0 8px rgba(0, 255, 209, 0.45);
    }

    #menu-footer {
      font-size: 0.78rem;
      text-align: center;
      color: #a5b4fc;
      opacity: 0.9;
    }

    /* GAME LAYOUT */
    #game {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
      background: radial-gradient(circle at top, rgba(0, 255, 255, 0.05), rgba(0, 0, 0, 0.92));
      border-radius: 24px;
      padding: 10px;
      border: 1px solid rgba(0, 255, 255, 0.25);
      box-shadow: 0 0 25px rgba(56, 189, 248, 0.35);
    }

    #hud {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      padding: 4px 6px 2px;
    }

    #hud span {
      background: rgba(15, 23, 42, 0.85);
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.5);
      font-size: 0.8rem;
    }

    #backToMenu {
      border-radius: 999px;
      border: 1px solid rgba(248, 113, 113, 0.8);
      background: rgba(15, 23, 42, 0.9);
      color: #fecaca;
      padding: 5px 9px;
      font-size: 0.8rem;
      cursor: pointer;
    }

    /* √ÅREA DEL JUEGO M√ÅS GRANDE */
    #gameArea {
      position: relative;
      overflow: hidden;
      border-radius: 18px;
      border: 1px solid rgba(56, 189, 248, 0.5);
      background: #020617;
      min-height: 550px; /* antes 340px */
    }

    #bgLayer {
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: 0;
    }

    #bgLayer iframe,
    #bgLayer img,
    #bgLayer video {
      width: 100%;
      height: 100%;
      border: none;
      object-fit: cover;
    }

    #overlayShade {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, transparent, rgba(3, 7, 18, 0.86));
      z-index: 1;
    }

    /* CARRILES ABAJO Y GRANDES */
    #lanesWrapper {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 55px;         /* pegado abajo */
      height: 220px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 22px;
      padding: 0 16px;
      z-index: 2;
      pointer-events: none;
    }

    .lane {
      flex: none;
      width: 110px;
      height: 180px;
      border-radius: 22px;
      border: 2px solid rgba(56, 189, 248, 0.65);
      background: linear-gradient(to bottom, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.7));
      position: relative;
      overflow: hidden;
    }

    .hit-zone {
      position: absolute;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 32px;
      border-radius: 999px;
      border: 2px solid rgba(251, 191, 36, 0.9);
      box-shadow: 0 0 16px rgba(251, 191, 36, 0.7);
    }

    .lane-label {
      position: absolute;
      bottom: 22px;
      left: 50%;
      transform: translate(-50%, 0);
      font-size: 1rem;
      font-weight: 700;
      text-shadow: 0 0 10px rgba(248, 250, 252, 0.9);
      pointer-events: none;
    }

    .arrow {
      position: absolute;
      width: 50px;
      height: 50px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 900;
      background: rgba(59, 130, 246, 0.9);
      border: 1px solid rgba(191, 219, 254, 0.9);
      box-shadow: 0 0 12px rgba(59, 130, 246, 0.9);
      color: #e5e7eb;
      pointer-events: none;
    }

    .arrow.up    { background: rgba(59, 130, 246, 0.95); }
    .arrow.down  { background: rgba(34, 197, 94, 0.95); }
    .arrow.left  { background: rgba(249, 115, 22, 0.95); }
    .arrow.right { background: rgba(236, 72, 153, 0.95); }

    #touchControls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 8px 4px 2px;
      flex-wrap: wrap;
    }

    .touch-btn {
      flex: 1 1 70px;
      max-width: 120px;
      padding: 8px 6px;
      border-radius: 14px;
      border: 1px solid rgba(56, 189, 248, 0.75);
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.4), rgba(15, 23, 42, 0.95));
      color: #f9fafb;
      font-size: 1rem;
      font-weight: 700;
      text-align: center;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 0 12px rgba(56, 189, 248, 0.7);
      transition: transform 0.08s, box-shadow 0.08s;
    }

    .touch-btn:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 0 6px rgba(56, 189, 248, 0.5);
    }

    #pcHint {
      text-align: center;
      font-size: 0.8rem;
      color: #c4b5fd;
      margin-top: 2px;
    }

    @media (max-width: 768px) {
      #menu {
        padding: 18px;
      }
      #menu h1 {
        font-size: 1.5rem;
      }
      #gameArea {
        min-height: 480px;
      }
      #lanesWrapper {
        gap: 12px;
        bottom: 45px;
        height: 190px;
      }
      .lane {
        width: 80px;
        height: 160px;
      }
      .arrow {
        width: 42px;
        height: 42px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div id="container">
    <!-- MEN√ö FUTURISTA -->
    <section id="menu">
      <div>
        <h1>FNF ‚Ä¢ NEO RITMO</h1>
        <h2>Elige modo, elige m√∫sica y machuca las flechas al ritmo üéµ</h2>
      </div>

      <!-- OPCI√ìN 1: MODO -->
      <div class="menu-section">
        <h3>1. Elige modo de juego</h3>
        <div class="menu-row">
          <label>Dispositivo:</label>
          <div class="toggle-group" id="modeGroup">
            <div class="chip active" data-mode="android">Android (Celular)</div>
            <div class="chip" data-mode="pc">PC (Computadora)</div>
          </div>
        </div>
      </div>

      <!-- OPCI√ìN 2: TIPO DE M√öSICA -->
      <div class="menu-section">
        <h3>2. Tipo de m√∫sica</h3>
        <div class="menu-row">
          <label>¬øC√≥mo quieres ver la canci√≥n?</label>
          <div class="toggle-group" id="musicTypeGroup">
            <div class="chip active" data-type="video">M√∫sica + Video</div>
            <div class="chip" data-type="image">M√∫sica + Imagen de fondo</div>
          </div>
        </div>
      </div>

      <!-- OPCI√ìN 3: CANCI√ìN -->
      <div class="menu-section">
        <h3>3. Canci√≥n</h3>
        <div class="menu-row">
          <label for="trackSelect">Elige una canci√≥n:</label>
          <select id="trackSelect"></select>
        </div>
      </div>

      <!-- OPCI√ìN 4: JUGAR -->
      <div class="menu-section">
        <h3>4. Empezar la batalla</h3>
        <p style="font-size:0.84rem; color:#e5e7eb; margin-bottom:6px;">
          Cuando le des a <strong>Jugar</strong>, se cargar√° la canci√≥n y empezar√°n a caer flechas.
          En modo Android usas los botones de flechas en pantalla. En PC, usa el teclado: ‚Üë ‚Üì ‚Üê ‚Üí.
        </p>
        <button id="playButton">Jugar</button>
      </div>

      <div id="menu-footer">
        Tip: si en el celular no se escucha la m√∫sica, toca primero en cualquier parte dentro del juego para activar el audio.
      </div>
    </section>

    <!-- JUEGO -->
    <section id="game" class="hidden">
      <div id="hud">
        <span id="hudMode">Modo: -</span>
        <span id="hudSong">Canci√≥n: -</span>
        <span id="hudScore">Puntuaci√≥n: 0</span>
        <span id="hudCombo">Combo: 0</span>
        <button id="backToMenu">Volver al men√∫</button>
      </div>

      <div id="gameArea">
        <div id="bgLayer"></div>
        <div id="overlayShade"></div>

        <div id="lanesWrapper">
          <div class="lane" data-lane="left">
            <div class="hit-zone"></div>
            <div class="lane-label">‚Üê</div>
          </div>
          <div class="lane" data-lane="down">
            <div class="hit-zone"></div>
            <div class="lane-label">‚Üì</div>
          </div>
          <div class="lane" data-lane="up">
            <div class="hit-zone"></div>
            <div class="lane-label">‚Üë</div>
          </div>
          <div class="lane" data-lane="right">
            <div class="hit-zone"></div>
            <div class="lane-label">‚Üí</div>
          </div>
        </div>
      </div>

      <div id="touchControls">
        <button class="touch-btn" data-dir="left">‚Üê</button>
        <button class="touch-btn" data-dir="down">‚Üì</button>
        <button class="touch-btn" data-dir="up">‚Üë</button>
        <button class="touch-btn" data-dir="right">‚Üí</button>
      </div>
      <div id="pcHint"></div>
    </section>
  </div>

  <script>
    // ========= TUS CANCIONES DE YOUTUBE (M√öSICA + VIDEO) =========
    const videoTracks = [
      {
        id: "vid1",
        name: "Tema Especial Calmatex - Trap / Dembow",
        videoUrl: "https://www.youtube.com/embed/SwqOjKUIz-E?rel=0"
      },
      {
        id: "vid2",
        name: "Alan Walker - Spectre - Electr√≥nica",
        videoUrl: "https://www.youtube.com/embed/lf7TVbYwJ7s?rel=0"
      },
      {
        id: "vid3",
        name: "FLOW - HERO - Kibou no Uta - Anime",
        videoUrl: "https://www.youtube.com/embed/3aevyrmqbY0?rel=0"
      },
      {
        id: "vid4",
        name: "Joost Klein - Europapa - Eurovision",
        videoUrl: "https://www.youtube.com/embed/gT2wY0DjYGo?rel=0"
      },
      {
        id: "vid5",
        name: "Entre Nosotros - Reggaet√≥n",
        videoUrl: "https://www.youtube.com/embed/FMA8X18-W1Q?rel=0"
      },
      {
        id: "vid6",
        name: "Guns N' Roses - Welcome To The Jungle - Rock",
        videoUrl: "https://www.youtube.com/embed/o1tj2zJ2Wvg?rel=0"
      },
      {
        id: "vid7",
        name: "Gorillaz - Feel Good Inc. - Alternativo",
        videoUrl: "https://www.youtube.com/embed/HyHNuVaZJ-k?rel=0"
      },
      {
        id: "vid8",
        name: "Starset - My Demons - Rock / Epic",
        videoUrl: "https://www.youtube.com/embed/nkll0StZJLA?rel=0"
      },
      {
        id: "vid9",
        name: "Bibi Babydoll - Automotivo Bibi Fogosa - Funk BR",
        videoUrl: "https://www.youtube.com/embed/PgF29M69QXg?rel=0"
      },
      {
        id: "vid10",
        name: "Luis Fonsi - Despacito - Reggaet√≥n",
        videoUrl: "https://www.youtube.com/embed/kJQP7kiw5Fk?rel=0"
      },
      {
        id: "vid11",
        name: "Anitta - Envolver - BR / Urbano",
        videoUrl: "https://www.youtube.com/embed/C7dPqrmDWxs?rel=0"
      },
      {
        id: "vid12",
        name: "VOX DEI || Hazbin Hotel (Espa√±ol Latino) - Hazbin / OST",
        videoUrl: "https://www.youtube.com/embed/k0ftbqj0is4?rel=0"
      },
      {
        id: "vid13",
        name: "[HazbinHotel/BLENDER] Stayed Gone - 3D Animation",
        videoUrl: "https://www.youtube.com/embed/YfL7vll73BM?rel=0"
      },
      {
        id: "vid14",
        name: "Canserbero (tema extra)",
        videoUrl: "https://www.youtube.com/embed/xK8SEUzk7BU?rel=0"
      }
    ];

    // ========= MODO IMAGEN + AUDIO (PLACEHOLDER) =========
    const imageTracks = [
      {
        id: "img1",
        name: "Ejemplo - Imagen + MP3 (C√°mbialo si quieres usar este modo)",
        audioUrl: "audio/tema1.mp3",
        imageUrl: "img/fondo1.jpg"
      }
    ];

    // ========= REFERENCIAS DOM =========
    const menu = document.getElementById("menu");
    const game = document.getElementById("game");
    const modeGroup = document.getElementById("modeGroup");
    const musicTypeGroup = document.getElementById("musicTypeGroup");
    const trackSelect = document.getElementById("trackSelect");
    const playButton = document.getElementById("playButton");
    const backToMenuBtn = document.getElementById("backToMenu");

    const hudMode = document.getElementById("hudMode");
    const hudSong = document.getElementById("hudSong");
    const hudScore = document.getElementById("hudScore");
    const hudCombo = document.getElementById("hudCombo");
    const pcHint = document.getElementById("pcHint");

    const bgLayer = document.getElementById("bgLayer");
    const lanesWrapper = document.getElementById("lanesWrapper");
    const laneElements = Array.from(document.querySelectorAll(".lane"));
    const touchControls = document.getElementById("touchControls");
    const touchButtons = Array.from(document.querySelectorAll(".touch-btn"));

    // ========= ESTADO =========
    let currentMode = "android";
    let currentMusicType = "video";
    let currentTrack = null;

    let audioElement = null;
    let gameRunning = false;
    let arrows = [];
    let lastSpawnTime = 0;
    let lastFrameTime = 0;
    const spawnInterval = 800;
    const fallSpeed = 220;
    let score = 0;
    let combo = 0;

    const laneOrder = ["left", "down", "up", "right"];

    // ========= MEN√ö =========
    function setActiveChip(container, chip) {
      const chips = container.querySelectorAll(".chip");
      chips.forEach(c => c.classList.remove("active"));
      chip.classList.add("active");
    }

    modeGroup.addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if (!chip) return;
      setActiveChip(modeGroup, chip);
      currentMode = chip.dataset.mode;
    });

    musicTypeGroup.addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if (!chip) return;
      setActiveChip(musicTypeGroup, chip);
      currentMusicType = chip.dataset.type;
      fillTrackSelect();
    });

    function fillTrackSelect() {
      trackSelect.innerHTML = "";
      const list = currentMusicType === "video" ? videoTracks : imageTracks;
      list.forEach(track => {
        const opt = document.createElement("option");
        opt.value = track.id;
        opt.textContent = track.name;
        trackSelect.appendChild(opt);
      });
    }

    // inicial
    fillTrackSelect();

    // ========= INICIO JUEGO =========
    playButton.addEventListener("click", () => {
      const trackId = trackSelect.value;
      const list = currentMusicType === "video" ? videoTracks : imageTracks;
      currentTrack = list.find(t => t.id === trackId) || list[0];
      if (!currentTrack) return;
      startGame();
    });

    backToMenuBtn.addEventListener("click", () => {
      stopGame();
      game.classList.add("hidden");
      menu.classList.remove("hidden");
    });

    function startGame() {
      gameRunning = true;
      arrows.forEach(a => a.element.remove());
      arrows = [];
      lastSpawnTime = performance.now();
      lastFrameTime = performance.now();
      score = 0;
      combo = 0;

      hudMode.textContent = "Modo: " + (currentMode === "android" ? "Android (Celular)" : "PC (Computadora)");
      hudSong.textContent = "Canci√≥n: " + currentTrack.name;
      hudScore.textContent = "Puntuaci√≥n: 0";
      hudCombo.textContent = "Combo: 0";

      if (currentMode === "android") {
        touchControls.classList.remove("hidden");
        pcHint.textContent = "";
      } else {
        touchControls.classList.add("hidden");
        pcHint.textContent = "Usa las flechas del teclado: ‚Üë ‚Üì ‚Üê ‚Üí para golpear en el momento justo.";
      }

      menu.classList.add("hidden");
      game.classList.remove("hidden");

      setupBackgroundAndAudio();

      requestAnimationFrame(gameLoop);
    }

    function stopGame() {
      gameRunning = false;
      arrows.forEach(a => a.element.remove());
      arrows = [];
      if (audioElement) {
        audioElement.pause();
        audioElement.currentTime = 0;
      }
      bgLayer.innerHTML = "";
    }

    // ========= FONDO & AUDIO =========
    function setupBackgroundAndAudio() {
      bgLayer.innerHTML = "";
      if (audioElement) {
        audioElement.pause();
        audioElement = null;
      }

      if (currentMusicType === "video") {
        const iframe = document.createElement("iframe");
        iframe.src = currentTrack.videoUrl;
        iframe.allow =
          "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.allowFullscreen = true;
        bgLayer.appendChild(iframe);
      } else {
        const img = document.createElement("img");
        img.src = currentTrack.imageUrl;
        img.alt = currentTrack.name;
        bgLayer.appendChild(img);

        audioElement = new Audio(currentTrack.audioUrl);
        audioElement.loop = false;
        audioElement.play().catch(() => {
          const resume = () => {
            audioElement.play().catch(() => {});
            window.removeEventListener("click", resume);
            window.removeEventListener("keydown", resume);
            window.removeEventListener("touchstart", resume);
          };
          window.addEventListener("click", resume, { once: true });
          window.addEventListener("keydown", resume, { once: true });
          window.addEventListener("touchstart", resume, { once: true });
        });
      }
    }

    // ========= LOOP =========
    function gameLoop(timestamp) {
      if (!gameRunning) return;

      const deltaMs = timestamp - lastFrameTime;
      const delta = deltaMs / 1000;
      lastFrameTime = timestamp;

      if (timestamp - lastSpawnTime > spawnInterval) {
        spawnArrow();
        lastSpawnTime = timestamp;
      }

      const gameRect = lanesWrapper.getBoundingClientRect();
      const laneRect = laneElements[0].getBoundingClientRect();
      const hitZoneOffsetFromBottom = 32 + 18; // altura hit-zone + bottom
      const hitZoneY = laneRect.bottom - hitZoneOffsetFromBottom - gameRect.top;
      const missThreshold = gameRect.height + 60;

      arrows.forEach(arrow => {
        arrow.y += fallSpeed * delta;
        arrow.element.style.top = arrow.y + "px";
      });

      arrows = arrows.filter(arrow => {
        if (arrow.y > missThreshold) {
          registerMiss();
          arrow.element.remove();
          return false;
        }
        return true;
      });

      requestAnimationFrame(gameLoop);
    }

    function spawnArrow() {
      if (!gameRunning) return;
      const dir = laneOrder[Math.floor(Math.random() * laneOrder.length)];
      const laneIndex = laneOrder.indexOf(dir);
      const lane = laneElements[laneIndex];

      const arrowEl = document.createElement("div");
      arrowEl.classList.add("arrow", dir);
      arrowEl.textContent =
        dir === "up" ? "‚Üë" :
        dir === "down" ? "‚Üì" :
        dir === "left" ? "‚Üê" : "‚Üí";

      arrowEl.style.top = "-60px"; // sale m√°s arriba
      lane.appendChild(arrowEl);

      arrows.push({
        dir,
        lane,
        element: arrowEl,
        y: -60
      });
    }

    // ========= INPUT =========
    function tryHit(direction) {
      if (!gameRunning) return;

      const gameRect = lanesWrapper.getBoundingClientRect();
      const laneRect = laneElements[0].getBoundingClientRect();
      const hitZoneOffsetFromBottom = 32 + 18;
      const hitZoneY = laneRect.bottom - hitZoneOffsetFromBottom - gameRect.top;
      const hitWindow = 45;

      let bestArrow = null;
      let bestDist = Infinity;
      arrows.forEach(arrow => {
        if (arrow.dir !== direction) return;
        const dist = Math.abs(arrow.y - hitZoneY);
        if (dist < hitWindow && dist < bestDist) {
          bestDist = dist;
          bestArrow = arrow;
        }
      });

      if (bestArrow) {
        score += 100;
        combo += 1;
        hudScore.textContent = "Puntuaci√≥n: " + score;
        hudCombo.textContent = "Combo: " + combo;

        bestArrow.element.style.boxShadow = "0 0 18px rgba(34,197,94,0.9)";
        bestArrow.element.style.borderColor = "rgba(34,197,94,1)";
        setTimeout(() => bestArrow.element.remove(), 60);

        arrows = arrows.filter(a => a !== bestArrow);
      } else {
        registerMiss();
      }
    }

    function registerMiss() {
      combo = 0;
      hudCombo.textContent = "Combo: " + combo;
    }

    touchButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const dir = btn.dataset.dir;
        tryHit(dir);
      });
    });

    document.addEventListener("keydown", (e) => {
      const key = e.key;
      if (key === "ArrowUp") {
        tryHit("up");
      } else if (key === "ArrowDown") {
        tryHit("down");
      } else if (key === "ArrowLeft") {
        tryHit("left");
      } else if (key === "ArrowRight") {
        tryHit("right");
      }
    });
  </script>
</body>
</html>
